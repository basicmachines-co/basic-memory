# v0.15.0 Release Plan

## Release Overview

**Target Version**: v0.15.0
**Previous Version**: v0.14.4
**Release Date**: TBD
**Milestone**: [v0.15.0](https://github.com/basicmachines-co/basic-memory/milestone)

### Release Highlights

This is a **major release** with 53 merged PRs introducing:
- **Cloud Sync**: Bidirectional sync with rclone bisync
- **Authentication**: JWT-based cloud authentication with subscription validation
- **Performance**: API optimizations and background processing improvements
- **Security**: Removed .env loading vulnerability, added .gitignore support
- **Platform**: Python 3.13 support
- **Bug Fixes**: 13+ critical fixes

---

## Release Checklist

### Phase 1: Pre-Release Testing

- [ ] **Run Full Test Suite**
  - [ ] Unit tests: `just test-unit`
  - [ ] Integration tests: `just test-int`
  - [ ] All tests passing
  - [ ] Coverage review for new features

- [ ] **Manual Testing - Core Features**
  - [ ] Claude Desktop integration
  - [ ] MCP tools (write_note, read_note, search_notes)
  - [ ] Multi-project operations
  - [ ] File sync (watch mode)
  - [ ] Database migrations

- [ ] **Manual Testing - New Cloud Features**
  - [ ] `bm cloud login` authentication flow
  - [ ] `bm cloud logout` session cleanup
  - [ ] `bm cloud sync` bidirectional sync
  - [ ] `bm cloud check` integrity verification
  - [ ] Cloud mode toggle for regular commands
  - [ ] Project creation in cloud mode

- [ ] **Manual Testing - Bug Fixes**
  - [ ] Entity upsert conflict resolution (#328)
  - [ ] memory:// URL underscore normalization (#329)
  - [ ] .gitignore file filtering (#287, #285)
  - [ ] move_note with/without file extension (#281)

- [ ] **Platform Testing**
  - [ ] Python 3.12 compatibility
  - [ ] Python 3.13 compatibility (new in this release)
  - [ ] macOS testing
  - [ ] Linux testing (if possible)
  - [ ] Windows/WSL testing (if possible)

### Phase 2: Security Review

- [ ] **Authentication & Authorization**
  - [ ] JWT token handling in cloud auth
  - [ ] Subscription validation logic
  - [ ] Token storage security
  - [ ] Session management

- [ ] **Configuration Security**
  - [ ] Verify .env file loading removed (#330)
  - [ ] Review config file permissions
  - [ ] Check for credential leakage

- [ ] **File Access Controls**
  - [ ] .gitignore integration working correctly
  - [ ] Sensitive files excluded from sync (.env, credentials, etc.)
  - [ ] Verify no unintended file access

- [ ] **Cloud Integration Security**
  - [ ] rclone configuration security
  - [ ] API endpoint authentication
  - [ ] Data transmission security

- [ ] **Database Security**
  - [ ] WAL mode security implications
  - [ ] SQL injection prevention (entity upsert)
  - [ ] Foreign key constraints

- [ ] **Dependency Audit**
  - [ ] Review new dependencies in uv.lock
  - [ ] Check for known vulnerabilities
  - [ ] Verify dependency licenses

### Phase 3: Documentation

- [ ] **CHANGELOG.md**
  - [ ] Create comprehensive v0.15.0 entry
  - [ ] List all major features
  - [ ] Document all bug fixes with issue links
  - [ ] Include breaking changes (if any)
  - [ ] Add migration guide (if needed)
  - [ ] Credit contributors

- [ ] **README.md**
  - [ ] Update version references
  - [ ] Add cloud features to feature list
  - [ ] Update quick start if needed
  - [ ] Verify all links working

- [ ] **Cloud Documentation**
  - [ ] Review docs/cloud-cli.md for accuracy
  - [ ] Update authentication instructions
  - [ ] Document subscription requirements
  - [ ] Add troubleshooting section

- [ ] **API Documentation**
  - [ ] Document new cloud endpoints
  - [ ] Update MCP tool documentation
  - [ ] Review schema documentation

- [ ] **Migration Guide**
  - [ ] Document any breaking changes
  - [ ] Provide upgrade instructions
  - [ ] Note new dependencies (rclone)
  - [ ] Config file changes

### Phase 4: Code Review

- [ ] **Review New Specifications**
  - [ ] SPEC-11: API Performance Optimization
  - [ ] SPEC-13: CLI Authentication with Subscription Validation
  - [ ] SPEC-6: Explicit Project Parameter Architecture
  - [ ] Other related specs

- [ ] **Review Major Feature PRs**
  - [ ] #330: Remove .env file loading
  - [ ] #329: Normalize memory:// URLs
  - [ ] #328: Simplify entity upsert
  - [ ] #327: CLI subscription validation
  - [ ] #322: Cloud CLI rclone bisync
  - [ ] #320: Lifecycle management optimization
  - [ ] #319: Background relation resolution
  - [ ] #318: Minimum timeframe enforcement
  - [ ] #317: Cloud deployment fixes
  - [ ] #315: API performance optimizations
  - [ ] #314: .gitignore integration
  - [ ] #313: Disable permalinks config flag
  - [ ] #312: DateTime JSON schema fixes

- [ ] **Review New Code Modules**
  - [ ] `cli/commands/cloud/` - New cloud CLI infrastructure
  - [ ] `cli/auth.py` - Authentication module
  - [ ] `ignore_utils.py` - .gitignore support
  - [ ] `mcp/project_context.py` - Refactored context management
  - [ ] `mcp/tools/chatgpt_tools.py` - ChatGPT integration
  - [ ] `schemas/cloud.py` - Cloud-related schemas

- [ ] **Review Breaking Changes**
  - [ ] API changes
  - [ ] CLI command changes
  - [ ] Configuration changes
  - [ ] Database schema changes

### Phase 5: GitHub Milestone Review

- [ ] **Closed Issues** (23 total)
  - [ ] Review all closed issues for completeness
  - [ ] Verify fixes are properly tested
  - [ ] Ensure documentation updated

- [ ] **Merged PRs** (13 in milestone, 53 total since v0.14.4)
  - [ ] All critical PRs merged
  - [ ] All PRs properly tested
  - [ ] All PRs documented

- [ ] **Open Issues**
  - [ ] #326: Create user guides and demos (can defer to v0.15.1?)
  - [ ] Decision on whether to block release

### Phase 6: Pre-Release Validation

- [ ] **Version Management**
  - [ ] Update `src/basic_memory/__init__.py` to `0.15.0`
  - [ ] Verify version automation working

- [ ] **Build Validation**
  - [ ] Clean build: `just clean`
  - [ ] Package builds: `uv build`
  - [ ] Installer builds (if applicable)

- [ ] **Quality Checks**
  - [ ] Linting: `just lint`
  - [ ] Formatting: `just format`
  - [ ] Type checking: `just typecheck`
  - [ ] All checks passing: `just check`

- [ ] **Integration Testing**
  - [ ] Fresh install test with `uv tool install`
  - [ ] Claude Desktop configuration test
  - [ ] MCP inspector test
  - [ ] Cloud login end-to-end test

- [ ] **Database Migrations**
  - [ ] All migrations apply cleanly
  - [ ] Migrations tested with existing data
  - [ ] Rollback procedures documented

### Phase 7: Release Execution

- [ ] **Pre-Release Communications**
  - [ ] Notify team of pending release
  - [ ] Prepare release announcement
  - [ ] Update marketing materials if needed

- [ ] **Create Release**
  - [ ] Run: `just release v0.15.0`
  - [ ] Verify git tag created
  - [ ] Verify GitHub release created
  - [ ] Monitor GitHub Actions

- [ ] **Verify Deployments**
  - [ ] PyPI package published
  - [ ] Homebrew formula updated
  - [ ] Docker image built (if applicable)
  - [ ] Documentation site updated

- [ ] **Post-Release Validation**
  - [ ] Test fresh install from PyPI
  - [ ] Test Homebrew installation
  - [ ] Verify all download links work
  - [ ] Check release notes formatting

- [ ] **Announcements**
  - [ ] GitHub release announcement
  - [ ] Social media (if applicable)
  - [ ] Community updates
  - [ ] Close milestone

---

## Key Features by Category

### Cloud Features
- Cloud authentication with JWT and subscription validation
- Bidirectional sync with rclone bisync
- Cloud mount commands for direct file access
- Cloud project management
- Integrity verification

### Performance Improvements
- API performance optimizations (SPEC-11)
- Background relation resolution (prevents cold start blocking)
- WAL mode for SQLite
- Non-blocking sync operations

### Security Enhancements
- Removed .env file loading vulnerability
- .gitignore integration (respects gitignored files)
- Improved authentication and session management
- Better config security

### Developer Experience
- Python 3.13 support
- ChatGPT tools integration
- Improved error handling
- Better CLI output and formatting

### Bug Fixes (13+ PRs)
- Entity upsert conflict resolution (#328)
- memory:// URL underscore handling (#329)
- .env loading removed (#330)
- Minimum timeframe enforcement (#318)
- move_note file extension handling (#281)
- Project parameter handling (#310)
- And more...

---

## Risk Assessment

### High Risk Areas
- Cloud authentication (new feature, security critical)
- Database entity upsert changes (data integrity)
- .gitignore integration (could miss or exclude wrong files)

### Medium Risk Areas
- Background relation resolution (performance vs correctness)
- WAL mode enablement (database locking behavior)
- API performance optimizations (potential regressions)

### Mitigation Strategies
- Extensive testing of cloud features
- Database migration testing with real data
- Rollback plan for each high-risk change
- Staged rollout if possible

---

## Rollback Plan

If critical issues are discovered post-release:

1. **Immediate**: Remove or deprecate broken features via patch release
2. **Communication**: Notify users via GitHub release notes
3. **Hotfix**: Prepare v0.15.1 with fixes
4. **Documentation**: Update docs with workarounds

---

## Success Criteria

- [ ] All tests passing
- [ ] No critical security vulnerabilities
- [ ] Documentation complete and accurate
- [ ] Cloud features working end-to-end
- [ ] Successful installations on all platforms
- [ ] Positive initial user feedback

---

## Post-Release Tasks

- [ ] Monitor issue tracker for bug reports
- [ ] Monitor PyPI download stats
- [ ] Gather user feedback
- [ ] Plan v0.15.1 for any quick fixes
- [ ] Start planning v0.16.0

---

## Notes

- This is a significant release with major new cloud features
- Extra attention needed on security review
- Consider beta release (v0.15.0b1) if timeline allows
- Cloud features require active subscription - ensure this is clear in docs